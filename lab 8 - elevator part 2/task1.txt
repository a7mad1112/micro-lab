                                                                               CODE SEGMENT
ASSUME CS:CODE,DS:CODE,ES:CODE,SS:CODE
;
;
PPI EQU 26H ; 8255A control register
PORTC EQU 24H ; c port
PORTB EQU 22H ; b port
PORTA EQU 20H ; a port
;

;
ORG 1000H
MOV AL,90H
OUT PPI,AL
L1:
IN AL, PORTA
AND AL, 00FH
CMP AL, 07H
JE FLOOR4
CMP AL, 00BH
JE FLOOR3
CMP AL, 00DH
JE FLOOR2
CMP AL, 00EH
JE FLOOR1
JMP L1

FLOOR1:
MOV AL, 11111001B
OUT PORTC, AL
IN AL, PORTA
AND AL, 0F0H
CMP AL, 10H
JNE FLOOR1
MOV AL, 0ECH
OUT PORTC, AL
MOV AL,0F9H
OUT PORTB,AL
JMP L1

FLOOR2:
MOV AL, 11111001B
OUT PORTC, AL
IN AL, PORTA
AND AL, 0F0H
CMP AL, 20H
JNE FLOOR2
MOV AL, 0DCH
OUT PORTC, AL
MOV AL,0A4H
OUT PORTB,AL
JMP L1

FLOOR3:
MOV AL, 11111001B
OUT PORTC, AL
IN AL, PORTA
AND AL, 0F0H
CMP AL, 40H
JNE FLOOR3
MOV AL, 0BCH
OUT PORTC, AL
MOV AL,0B0H
OUT PORTB,AL
JMP L1

FLOOR4:
MOV AL, 11110110B
OUT PORTC, AL
IN AL, PORTA
AND AL, 0F0H
CMP AL, 80H
JNE FLOOR4
MOV AL, 07CH
OUT PORTC, AL
MOV AL,99H
OUT PORTB,AL
JMP L1


CODE ENDS
END